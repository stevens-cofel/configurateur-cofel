<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <div style="background:#003366; padding:10px;">
  <a href="../index.html" style="
    color:white;
    text-decoration:none;
    font-weight:bold;
    font-family:Arial, sans-serif;
    background:#0055aa;
    padding:8px 14px;
    border-radius:6px;
    display:inline-block;
  ">
    ⬅ Retour aux configurateurs
  </a>
</div>
<title>Configurateur – Tôlerie sur mesure & panneau Alu/PVC (type Dibond)</title>
<style>
  body{font-family:Arial, sans-serif;background:#f4f4f4;margin:0;padding:24px;color:#333}
  h1{text-align:center;margin:0 0 16px}
  .wrap{max-width:860px;margin:0 auto;background:#fff;border-radius:12px;box-shadow:0 10px 28px rgba(0,0,0,.08);padding:20px}
  label{display:block;margin-top:14px;font-weight:700}
  input,select{width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:8px;min-height:44px;font:inherit}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  @media (max-width:820px){.grid{grid-template-columns:1fr}}
  fieldset{border:1px solid #ddd;border-radius:10px;padding:10px;margin-top:8px}
  fieldset legend{padding:0 8px;font-weight:700}
  .radio-row{display:flex;gap:8px;flex-wrap:wrap}
  .radio-row label{font-weight:normal;border:1px solid #ddd;border-radius:8px;padding:6px 10px;display:flex;align-items:center;gap:8px}
  .note{background:#fff7d6;border:1px solid #f2d27b;border-radius:8px;padding:10px;font-size:13px;color:#664d00;margin-top:8px}
  .result{margin-top:18px;padding:14px;background:#e9f5ff;border:1px solid #b3e0ff;border-radius:10px;text-align:center;font-size:18px}
</style>
</head>
<body>
<h1>Tôlerie sur mesure & panneau Alu/PVC (type Dibond)</h1>

<div class="wrap">
  <!-- Famille + Quantité -->
  <div class="grid">
    <div>
      <label for="famille">Famille</label>
      <select id="famille">
        <option value="alu" selected>Aluminium</option>
        <option value="dibond">Alu/PVC 3 mm (type Dibond)</option>
      </select>
    </div>
    <div>
      <label for="quantite">Quantité</label>
      <input type="number" id="quantite" min="1" value="1" />
    </div>
  </div>

  <!-- Aluminium -->
  <fieldset id="blockAlu">
    <legend>Matière – Aluminium</legend>

    <fieldset style="margin-top:10px">
      <legend>Aluminium 15/10ᵉ</legend>
      <div class="radio-row">
        <label><input type="radio" name="matAlu" value="alu15_brut"> Brut</label>
        <label><input type="radio" name="matAlu" value="alu15_pre" checked> Prélaqué</label>
        <label><input type="radio" name="matAlu" value="alu15_laq"> Laqué</label>
      </div>
    </fieldset>

    <fieldset style="margin-top:10px">
      <legend>Aluminium 20/10ᵉ</legend>
      <div class="radio-row">
        <label><input type="radio" name="matAlu" value="alu20_brut"> Brut</label>
        <label><input type="radio" name="matAlu" value="alu20_pre"> Prélaqué</label>
        <label><input type="radio" name="matAlu" value="alu20_laq"> Laqué</label>
      </div>
    </fieldset>

    <div class="note">⚠️ Prendre en compte le <b>développé de la tôle</b> avec plis lors de la saisie des dimensions.</div>
  </fieldset>

  <!-- Dibond -->
  <fieldset id="blockDibond" style="display:none">
    <legend>Matière – Alu/PVC 3 mm (type Dibond)</legend>
    <div class="radio-row">
      <label><input type="radio" name="matDibond" value="dibond_pre" checked> Prélaqué</label>
      <label><input type="radio" name="matDibond" value="dibond_laq"> Laqué</label>
    </div>
    <div class="note">ℹ️ <b>Pas de pli</b> sur l’alu/PVC type Dibond.</div>
  </fieldset>

  <!-- Dimensions -->
  <div class="grid">
    <div>
      <label for="largeur">Largeur (mm)</label>
      <input type="number" id="largeur" min="1" placeholder="Ex : 1200" />
    </div>
    <div>
      <label for="hauteur">Hauteur (mm)</label>
      <input type="number" id="hauteur" min="1" placeholder="Ex : 600" />
    </div>
  </div>
  <div class="grid">
    <div>
      <label>Surface (calculée)</label>
      <input id="surface" value="0,000 m²" disabled />
    </div>
    <div></div>
  </div>

  <!-- Résultats -->
  <div class="result">
    <p>Total HT (×Qté) : <span id="prixHT">0,00</span> €</p>
    <p>Total TTC (TVA 20%) : <span id="prixTTC">0,00</span> €</p>
  </div>
</div>

<script>
/*** CONFIG ***/
const TVA = 0.20;
const PRICE = {
  // Aluminium 15/10e
  alu15_brut: 61.00,
  alu15_pre:  82.00,
  alu15_laq:  94.00,
  // Aluminium 20/10e
  alu20_brut: 72.00,
  alu20_pre:  89.00,
  alu20_laq: 105.00,
  // Dibond (alu/pvc 3 mm)
  dibond_pre: 50.00,
  dibond_laq: 71.00
};

/*** DOM ***/
const $ = id => document.getElementById(id);
const elFamille = $('famille');
const elBlockAlu = $('blockAlu');
const elBlockDibond = $('blockDibond');
const elQ = $('quantite');
const elL = $('largeur');
const elH = $('hauteur');
const elSurf = $('surface');
const elHT = $('prixHT');
const elTTC = $('prixTTC');

/*** UTILS ***/
function euro(n){ return (isFinite(n)?n:0).toFixed(2).replace('.', ','); }
function areaM2(Lmm,Hmm){ return (Math.max(0,Number(Lmm||0))*Math.max(0,Number(Hmm||0)))/1e6; }
function selectedMaterialKey(){
  if(elFamille.value==='alu'){
    const r = document.querySelector('input[name="matAlu"]:checked');
    return r ? r.value : 'alu15_pre';
  }else{
    const r = document.querySelector('input[name="matDibond"]:checked');
    return r ? r.value : 'dibond_pre';
  }
}

/*** DISPLAY TOGGLES ***/
function toggleBlocks(){
  const isAlu = elFamille.value==='alu';
  elBlockAlu.style.display   = isAlu ? '' : 'none';
  elBlockDibond.style.display= isAlu ? 'none' : '';
}

/*** CALCUL ***/
function compute(){
  const key = selectedMaterialKey();
  const prixM2 = PRICE[key] || 0;
  const A = areaM2(elL.value, elH.value);
  const unitHT = prixM2 * A;
  const Q = Math.max(1, Number(elQ.value||1));
  const totalHT = unitHT * Q;
  const totalTTC = totalHT * (1 + TVA);
  elSurf.value   = `${A.toFixed(3).replace('.', ',')} m²`;
  elHT.textContent  = euro(totalHT);
  elTTC.textContent = euro(totalTTC);
}

/*** EVENTS ***/
['input','change'].forEach(evt=>{
  [famille, quantite, largeur, hauteur,
   ...document.querySelectorAll('input[name="matAlu"]'),
   ...document.querySelectorAll('input[name="matDibond"]')
  ].forEach(el=> el.addEventListener(evt, ()=>{ toggleBlocks(); compute(); }));
});

/*** INIT ***/
toggleBlocks();
compute();
</script>
</body>
</html>

