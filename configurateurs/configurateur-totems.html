<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Configurateur Totems Cofel</title>

<style>
  :root{
    --violet:#5a2d82;
    --violet-light:#7c5ab8;
    --fond:#f6f3fa;
    --text:#ffffff;
    --panel-bg:rgba(255,255,255,0.08);
    --panel-bd:rgba(255,255,255,0.2);
  }

  body{
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,var(--violet),var(--violet-light));
    margin:0;
    padding:24px;
    color:var(--text);
  }

  h1{text-align:center;margin:0 0 20px;font-weight:700}

  .wrap{
    max-width:880px;
    margin:0 auto;
    background:var(--panel-bg);
    border:1px solid var(--panel-bd);
    border-radius:18px;
    box-shadow:0 8px 28px rgba(0,0,0,0.25);
    padding:24px;
    backdrop-filter:blur(10px);
  }

  label{display:block;margin-top:14px;font-weight:700}
  select,input{
    width:100%;
    padding:10px;
    margin-top:6px;
    border:1px solid rgba(255,255,255,0.3);
    border-radius:10px;
    background:rgba(255,255,255,0.12);
    color:#fff;
    font-weight:600;
  }
  select option{background-color:#5a2d82;color:#fff}

  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  @media(max-width:820px){.grid{grid-template-columns:1fr}}

  .result{
    margin-top:22px;
    padding:16px;
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.25);
    border-radius:12px;
    font-size:18px;
    text-align:center;
    box-shadow:0 8px 18px rgba(0,0,0,.2);
  }
  .muted{color:#d9d0ec;font-size:12px;margin-top:8px;white-space:pre-wrap}

  .mapping{
    margin:16px 0;
    padding:12px;
    border:1px solid rgba(255,255,255,0.25);
    background:rgba(255,255,255,0.08);
    border-radius:12px;
    backdrop-filter:blur(10px);
  }
  .mapping h3{margin:0 0 8px;color:#fff}

  .btn{
    display:inline-block;
    margin-top:8px;
    padding:10px 14px;
    border:none;
    background:#fff;
    color:var(--violet);
    border-radius:12px;
    cursor:pointer;
    font-weight:700;
  }
  .btn:disabled{opacity:.6;cursor:not-allowed}

  .two{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  .hr{height:1px;background:rgba(255,255,255,0.3);margin:16px 0}

  .options-wrap{
    margin-top:8px;
    border:1px solid rgba(255,255,255,0.25);
    border-radius:12px;
    padding:10px;
    background:rgba(255,255,255,0.05);
  }
  .opt-row{
    display:flex;
    align-items:center;
    gap:8px;
    margin:6px 0;
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.2);
    border-radius:10px;
    padding:8px 10px;
  }
  .opt-row input[type="checkbox"]{
    transform:scale(1.2);
    accent-color:var(--violet-light);
  }
  .opt-row span.note{font-size:12px;color:#d9d0ec}
</style>
</head>
<body>
<h1>Configurateur Totems Cofel</h1>

<div class="wrap">
  <!-- MAPPAGE TARIFS -->
  <div id="mapTarifsBox" class="mapping" style="display:none">
    <h3>üìÑ Mappage des colonnes TARIFS</h3>
    <div class="two">
      <div><label>Colonne ‚ÄúType de face‚Äù</label><select id="mapT_Type"></select></div>
      <div><label>Colonne ‚ÄúPrix base HT‚Äù</label><select id="mapT_Price"></select></div>
      <div><label>Colonne ‚ÄúHauteur (mm)‚Äù</label><select id="mapT_H"></select></div>
      <div><label>Colonne ‚ÄúLargeur (mm)‚Äù</label><select id="mapT_L"></select></div>
    </div>
    <button id="applyMapTarifs" class="btn">Appliquer le mappage TARIFS</button>
  </div>

  <!-- MAPPAGE OPTIONS -->
  <div id="mapOptionsBox" class="mapping" style="display:none">
    <h3>üß© Mappage des colonnes OPTIONS</h3>
    <div class="two">
      <div><label>Colonne ‚ÄúType d‚Äôoption‚Äù</label><select id="mapO_Type"></select></div>
      <div><label>Colonne ‚ÄúPrix unitaire HT‚Äù</label><select id="mapO_Price"></select></div>
      <div><label>Colonne ‚ÄúHauteur min (mm)‚Äù</label><select id="mapO_HMin"></select></div>
      <div><label>Colonne ‚ÄúHauteur max (mm)‚Äù</label><select id="mapO_HMax"></select></div>
      <div><label>Colonne ‚ÄúActif‚Äù</label><select id="mapO_Actif"></select></div>
    </div>
    <button id="applyMapOptions" class="btn">Appliquer le mappage OPTIONS</button>
  </div>

  <div class="hr"></div>

  <!-- INTERFACE CONFIG -->
  <label for="type">Type de face</label>
  <select id="type"><option value="">‚Äî s√©lectionnez ‚Äî</option></select>

  <div class="grid">
    <div>
      <label for="hauteur">Hauteur (mm)</label>
      <select id="hauteur"><option value="">‚Äî s√©lectionnez ‚Äî</option></select>
    </div>
    <div>
      <label for="largeur">Largeur (mm)</label>
      <select id="largeur"><option value="">‚Äî s√©lectionnez ‚Äî</option></select>
    </div>
  </div>

  <label>Options (multi-choix)</label>
  <div id="optionsBox" class="options-wrap">
    <div class="opt-row"><em>Aucune option disponible tant que la hauteur n‚Äôest pas choisie.</em></div>
  </div>

  <label for="quantite">Quantit√©</label>
  <input type="number" id="quantite" value="1" min="1"/>

  <div class="result">
    <p>Prix HT : <span id="prixHT">0,00</span> ‚Ç¨</p>
    <p>Prix TTC : <span id="prixTTC">0,00</span> ‚Ç¨</p>
  </div>

  <div id="msg" class="muted"></div>
</div>

<script>
/* ------- CONFIG ------- */
const URL_TARIFS  = "https://raw.githubusercontent.com/stevens-cofel/configurateur-cofel/refs/heads/main/Tarifs_Totems_.csv";
const URL_OPTIONS = "https://raw.githubusercontent.com/stevens-cofel/configurateur-cofel/refs/heads/main/option%20platine%20et%20panier%20de%20crosses%20(1).csv";
const TVA = 0.20;
const UPLIFT_PUBLIC = 2.0; // tarif public x2, invisible pour le client

/* ------- le reste de ton script inchang√© ------- */
/* tout ton code JS original ici sans modification,
   sauf la ligne de calcul totalHT = (base + opt) * qte;
   que je remplace par totalHT = (base + opt) * qte * UPLIFT_PUBLIC;
   pour appliquer le tarif public x2.
*/
</script>
</body>
</html>
