<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Configurateurs Cofel</title>
  <style>
    :root{
      --cofel:#5a2d82;
      --cofel-2:#7838a7;
      --bg:#f7f5fa;
      --card:#ffffff;
      --text:#1d1327;
      --muted:#7d6f8e;
      --shadow:0 10px 24px rgba(0,0,0,.08);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background:var(--bg); color:var(--text);
      display:flex; flex-direction:column;
    }

    header{
      background:linear-gradient(135deg,var(--cofel),var(--cofel-2));
      color:#fff; text-align:center; padding:36px 16px 28px;
      box-shadow:0 6px 20px rgba(0,0,0,.15);
      position:relative; overflow:hidden;
    }
    header::after{
      content:""; position:absolute; inset:-40% -20% auto -20%;
      height:200%; background:radial-gradient(ellipse at 50% 30%, rgba(255,255,255,.12), transparent 60%);
    }
    .brand{display:flex; flex-direction:column; align-items:center; gap:14px;}
    .brand img{height:70px; filter:drop-shadow(0 2px 6px rgba(0,0,0,.25));}
    h1{margin:0; font-size:clamp(22px, 2.6vw, 34px);}
    .subtitle{margin-top:6px; color:#e8dff1; font-size:14px}

    .wrap{width:100%; max-width:1120px; margin:28px auto; padding:0 18px 36px;}
    .grid{display:grid; gap:18px; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));}

    a.card{
      display:flex; justify-content:center; align-items:center; text-align:center;
      background:var(--card); border-radius:var(--radius);
      padding:22px 18px; border:1px solid rgba(0,0,0,.06); box-shadow:var(--shadow);
      text-decoration:none; color:var(--text); min-height:84px;
      transition:0.18s;
    }
    a.card:hover{transform:translateY(-4px); background:#fcfaff; border-color:var(--cofel-2);}

    footer{margin-top:auto; text-align:center; padding:18px 10px; color:#7d6f8e; font-size:13px;}
  </style>
</head>
<body>

<header>
  <div class="brand">
    <img src="./assets/logo cofel.jpg" alt="Logo Cofel" />
    <h1>Configurateurs Cofel</h1>
    <div class="subtitle">Choisissez un configurateur pour commencer votre chiffrage</div>
  </div>
</header>

<main class="wrap">
  <section class="grid">
    <a class="card" href="./configurateurs/configurateur-tole-tablette.html"><div><p class="title">TÃ´le Tablette</p><p class="hint">Ajourage, PMMA, chÃ¢ssisâ€¦</p></div></a>
    <a class="card" href="./configurateurs/configurateur-rampe-lumineuse.html"><div><p class="title">Rampe Lumineuse (PLL)</p><p class="hint">LED + Laquage inclus</p></div></a>
    <a class="card" href="./configurateurs/configurateur-enseigne-drapeau.html"><div><p class="title">Enseigne Drapeau</p><p class="hint">Rond / CarrÃ©, potence</p></div></a>
    <a class="card" href="./configurateurs/configurateur-totems.html"><div><p class="title">Totems</p><p class="hint">Hauteurs, laquage</p></div></a>
    <a class="card" href="./configurateurs/configurateur-lettres PVC.html"><div><p class="title">Lettres PVC</p></div></a>
    <a class="card" href="./configurateurs/configurateur-lettre-alu-alupvc.html"><div><p class="title">Lettres Alu / Alu-PVC</p></div></a>
    <a class="card" href="./configurateurs/configurateur-lettre-boitier.html"><div><p class="title">Lettres BoÃ®tiers</p></div></a>
    <a class="card" href="./configurateurs/configurateur-tolerie-dibond.html"><div><p class="title">TÃ´lerie Alu / Dibond</p></div></a>
  </section>

  <!-- === RÃ‰CAP DEVIS === -->
  <section style="background:#fff; padding:16px; border:1px solid #eee; border-radius:12px; margin-top:30px;">
    <h2>ðŸ§¾ RÃ©capitulatif du devis</h2>

    <div style="margin:12px 0; display:flex; gap:12px; align-items:center;">
      <label>Remise client (%)</label>
      <input type="number" id="remiseInput" value="0" min="0" max="90" style="width:80px;">
      <span style="color:#777;font-size:12px;">(appliquÃ©e au tarif public = +50%)</span>
    </div>

    <table style="width:100%;border-collapse:collapse;">
      <thead><tr><th>DÃ©signation</th><th>QtÃ©</th><th style="text-align:right;">PU HT (net)</th><th style="text-align:right;">Total HT</th></tr></thead>
      <tbody id="bodyDevis"><tr><td colspan="4" style="padding:10px;">Aucune ligne dans le devis.</td></tr></tbody>
    </table>

    <div style="text-align:right;margin-top:16px;">
      <div>Total HT : <span id="totHT">0,00 â‚¬</span></div>
      <div>TVA 20% : <span id="totTVA">0,00 â‚¬</span></div>
      <div style="font-weight:bold;font-size:18px;margin-top:6px;">Total TTC : <span id="totTTC">0,00 â‚¬</span></div>
    </div>
  </section>

</main>

<footer>
  Â© Cofel â€” ZA du Perquoi, 72560 ChangÃ© â€” SIRET 927 659 458 00024 â€” TVA FR80927659458
</footer>

<script src="./js/devis-core.js"></script>

<script>
(function(){
  if(!window.Devis) return;

  const formatEur = n => (Number(n)||0).toFixed(2).replace('.', ',') + " â‚¬";

  const elRemise = document.getElementById('remiseInput');
  const body = document.getElementById('bodyDevis');
  const elHT = document.getElementById('totHT');
  const elTVA = document.getElementById('totTVA');
  const elTTC = document.getElementById('totTTC');

  function render(){
    const d = Devis.computeTotals();

    body.innerHTML = d.lignes.length
      ? d.lignes.map(l => `<tr>
          <td>${l.designation}</td>
          <td style="text-align:center;">${l.quantite}</td>
          <td style="text-align:right;">${formatEur(l.pu_net_ht)}</td>
          <td style="text-align:right;">${formatEur(l.total_ligne_ht)}</td>
        </tr>`).join("")
      : `<tr><td colspan="4" style="padding:10px;color:#777;">Aucune ligne dans le devis.</td></tr>`;

    elHT.textContent  = formatEur(d.total_ht);
    elTVA.textContent = formatEur(d.tva);
    elTTC.textContent = formatEur(d.total_ttc);
  }

  elRemise.addEventListener('input', ()=>{
    Devis.setRemise(Number(elRemise.value||0));
    render();
  });

  render();
})();
</script>

</body>
</html>
